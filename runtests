#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import argparse
import os
import sys
import logging
import unittest
import re

logger = logging.getLogger(__name__)
root_dir = os.path.abspath(os.path.dirname(__file__))
TESTS_DIR = os.path.join(root_dir, 'tests')

def run_test(tests):
    tests = []
    loader = unittest.TestLoader()
    if len(args.tests) > 0:
        for test in args.tests:
            suite = loader.loadTestsFromName(test)
            tests.append(suite)
    else:
        print('No test selected. Testing pycodestyle/flake8 by default')
        suite = loader.loadTestsFromName('tests')
        tests.append(suite)

    full_test = unittest.TestSuite(tests)
    runner = unittest.TextTestRunner(sys.stdout)
    runner.run(full_test)


if __name__ == '__main__':
    parser = argparse.ArgumentParser(description="Run tests.")
    parser.add_argument("tests", nargs='*', help='Use dot notation \
                                                  starting from the tests folder')
    parser.add_argument('--system', '-S', action='store_true')
    args = parser.parse_args()
    run_test(args.tests)
